---
layout: default
---

{% assign gallery_folder = "photos" %}
{% if site.gallery and site.gallery.folder %}
  {% assign gallery_folder = site.gallery.folder %}
{% endif %}

{% assign folder_token = "/" | append: gallery_folder | append: "/" %}
{% assign photo_files = site.static_files | where_exp: "file", "file.path contains folder_token" %}
{% assign image_files = "" | split: "" %}
{% for file in photo_files %}
  {% assign ext = file.extname | downcase %}
  {% if ext == ".jpg" or ext == ".jpeg" or ext == ".png" or ext == ".gif" or ext == ".webp" %}
    {% unless file.path contains "/thumbs/" %}
      {% assign image_files = image_files | push: file %}
    {% endunless %}
  {% endif %}
{% endfor %}

{% assign split_token = folder_token %}
{% assign gallery_groups = image_files | group_by_exp: "file", "file.path | split: split_token | last | split: '/' | first" %}
{% assign captions_enabled = true %}
{% if site.gallery and site.gallery.captions == false %}
  {% assign captions_enabled = false %}
{% endif %}

<style>
  .gallery-shell {
    margin: 1.5rem 0 3rem;
  }
  .gallery-shell h1 {
    margin-bottom: 0.75rem;
  }
  .gallery-meta {
    margin: 0 0 1.5rem;
    color: #4b5563;
  }
  .gallery-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 0.75rem;
    margin: 1rem 0 2rem;
  }
  .gallery-nav a {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.35rem 0.7rem;
    border-radius: 0px;
    border: 1px solid rgba(31, 41, 55, 0.2);
    text-decoration: none;
    font-size: 0.9rem;
  }
  .gallery-block {
    margin: 2.5rem 0 3rem;
  }
  .gallery-block h2 {
    margin-bottom: 1rem;
      text-transform: capitalize;
  }
  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 1rem;
  }
  .gallery-card {
    margin: 0;
    position: relative;
    overflow: hidden;
    border-radius: 0px;
    background: #f3f4f6;
    border: 1px solid rgba(15, 23, 42, 0.08);
  }
  .gallery-card img {
    width: 100%;
    height: 100%;
    aspect-ratio: 4 / 3;
    object-fit: cover;
    display: block;
    transition: transform 0.35s ease;
  }
  .gallery-card:hover img {
    transform: scale(1.04);
  }
  .gallery-caption {
    position: absolute;
    inset: auto 0 0 0;
    padding: 0.4rem 0.6rem;
    font-size: 0.8rem;
    color: #0f172a;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.9) 100%);
  }
  @media (max-width: 640px) {
    .gallery-grid {
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    }
  }
</style>

<div class="gallery-shell">
{% assign show_title = true %}
{% if page.show_title == false %}
  {% assign show_title = false %}
{% endif %}

{% if page.title %}
  <h1>{{ page.title }}</h1>
{% endif %}

  {% if page.description %}
    <p class="gallery-meta">{{ page.description }}</p>
  {% endif %}

  {{ content }}

{% assign nav_enabled = true %}
{% if site.gallery and site.gallery.nav == false %}
  {% assign nav_enabled = false %}
{% endif %}

{% if page.gallery %}
    {% assign target_group = gallery_groups | where_exp: "group", "group.name == page.gallery" | first %}
    {% if target_group %}
      <div class="gallery-block" id="gallery-{{ target_group.name | slugify }}">
        {% if show_title %}
          <h2>{{ page.gallery_title | default: target_group.name | replace: "-", " " | replace: "_", " " }}</h2>
        {% endif %}
        <div class="gallery-grid">
          {% for file in target_group.items %}
            {% assign caption = file.name | split: "." | first | replace: "-", " " | replace: "_", " " %}
            <figure class="gallery-card">
              <a href="{{ file.path | relative_url }}">
                <img src="{{ file.path | relative_url }}" alt="{{ caption }}" loading="lazy" decoding="async">
              </a>
              {% if captions_enabled %}
                <figcaption class="gallery-caption">{{ caption }}</figcaption>
              {% endif %}
            </figure>
          {% endfor %}
        </div>
      </div>
    {% else %}
      <p class="gallery-meta">Nu am găsit galeria "{{ page.gallery }}". Verifică numele subfolderului din <code>{{ gallery_folder }}/</code>.</p>
    {% endif %}
  {% else %}
    {% if nav_enabled and gallery_groups.size > 1 %}
      <div class="gallery-nav">
        {% for group in gallery_groups %}
          <a href="#gallery-{{ group.name | slugify }}">{{ group.name | replace: "-", " " | replace: "_", " " }}</a>
        {% endfor %}
      </div>
    {% endif %}

    {% for group in gallery_groups %}
      <div class="gallery-block" id="gallery-{{ group.name | slugify }}">
        {% if show_title %}
          <h2>{{ group.name | replace: "-", " " | replace: "_", " " }}</h2>
        {% endif %}
        <div class="gallery-grid">
          {% for file in group.items %}
            {% assign caption = file.name | split: "." | first | replace: "-", " " | replace: "_", " " %}
            <figure class="gallery-card">
              <a href="{{ file.path | relative_url }}">
                <img src="{{ file.path | relative_url }}" alt="{{ caption }}" loading="lazy" decoding="async">
              </a>
              {% if captions_enabled %}
                <figcaption class="gallery-caption">{{ caption }}</figcaption>
              {% endif %}
            </figure>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  {% endif %}
</div>
